language: c
compiler: gcc
os: linux
dist: xenial

addons:
  apt:
    packages: &default_packages
      - libbsd-dev

matrix:
  #fast_finish: True
  include:
    - stage: Tests
      name: Code checking
      addons:
        apt:
          packages:
            - shellcheck
            - devscripts
      before_install:
        - git clone git@github.com:slimm609/checksec.sh.git
      script:
        - shellcheck -x build.sh
        - ./build.sh
        - ./checksec.sh/checksec -f Debug/secure_socket
        - hardening-check -c -v Debug/secure_socket
  

notifications:
  email: false